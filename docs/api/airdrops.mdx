---
title: "Airdrops API"
description: "Endpoints for creating, funding, and managing airdrop campaigns with optional merkle-tree recipient verification."
icon: "gift"
---

Airdrops distribute BCH or CashTokens to many recipients at once. Claim transactions are always backend co-signed by a per-campaign claim-authority key. Open campaigns allow any claimer address to request this co-signature; KYC campaigns require a merkle whitelist match first.

## List Campaigns (Creator)

```http
GET /api/airdrops?creator={address}
```

Returns all campaigns created by the given address.

## List Claimable Campaigns

```http
GET /api/airdrops/claimable?address={address}
```

Returns all `ACTIVE` campaigns the given address has not yet claimed (or has remaining claims on).

## Resolve Claim Link

```http
GET /api/airdrops/claim/:token
```

Resolves a claim link token (from the campaign's `claim_link` URL) to the full campaign record.

## Get Campaign

```http
GET /api/airdrops/:id
```

Returns the campaign record and its full claim history.

## Create Campaign

```http
POST /api/airdrops/create
```

Deploys the AirdropCovenant on-chain and stores `status: PENDING`.

**Body**
```json
{
  "creator": "bchtest:qr...",
  "title": "Community Rewards Q1",
  "campaignType": "AIRDROP",
  "tokenType": "BCH",
  "totalAmount": 100,
  "amountPerClaim": 0.5,
  "startDate": 1700000000,
  "endDate": 1731536000,
  "maxClaimsPerAddress": 1,
  "requireKyc": false,
  "vaultId": "optional-vault-uuid"
}
```

For token airdrops add `"tokenType": "FUNGIBLE_TOKEN"` and `"tokenCategory": "hex32"`.

**Response**
```json
{
  "success": true,
  "campaign": { "id": "...", "status": "PENDING", "claim_link": "https://..." },
  "deployment": {
    "contractAddress": "bchtest:p...",
    "fundingRequired": true,
    "nftCommitment": "hex..."
  }
}
```

## Generate Merkle Tree

```http
POST /api/airdrops/:id/generate-merkle
```

For KYC-restricted campaigns. Build a merkle tree from an explicit recipient list before funding.

**Body**
```json
{
  "recipients": [
    { "address": "bchtest:qr...", "amount": 1.0 },
    { "address": "bchtest:qs...", "amount": 0.5 }
  ]
}
```

**Response**
```json
{
  "success": true,
  "merkleRoot": "hex32",
  "totalRecipients": 2,
  "leaves": [...]
}
```

## Get Funding Info

```http
GET /api/airdrops/:id/funding-info
```

Returns the unsigned `wcTransaction` to fund the campaign contract. KYC campaigns must generate their merkle tree first.

## Confirm Funding

```http
POST /api/airdrops/:id/confirm-funding

{ "txHash": "hex64" }
```

Verifies the contract output on-chain and transitions the campaign to `ACTIVE`.

## Get Merkle Proof

```http
GET /api/airdrops/:id/proof/:address
```

Returns the merkle proof for an address. Public campaigns return `"publicCampaign": true` with an empty proof array.

## Claim

```http
POST /api/airdrops/:id/claim

{ "claimerAddress": "bchtest:q..." }
```

Builds the claim `wcTransaction`. For KYC campaigns, verifies the claimer is in the merkle tree. Enforces `maxClaimsPerAddress`.
The backend also applies the claim-authority co-signature before returning the transaction to the claimer wallet.

## Confirm Claim

```http
POST /api/airdrops/:id/confirm-claim

{
  "claimerAddress": "bchtest:q...",
  "claimedAmount": 0.5,
  "txHash": "hex64"
}
```

Records the claim and increments `claimed_count`.

## Pause / Cancel

```http
POST /api/airdrops/:id/pause
POST /api/airdrops/:id/cancel
x-user-address: bchtest:q...
```

Creator-only. Each returns an unsigned `wcTransaction`. Follow with `confirm-pause` or `confirm-cancel`.

<Note>
`resume` is available in the covenant but not exposed as a public HTTP route in the current backend release.
</Note>
